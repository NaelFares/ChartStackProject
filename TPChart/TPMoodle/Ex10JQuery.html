<html>
  <head>
    <meta charset="UTF-8">
    <title>TestJQuery-Question#2</title>
  </head>
  <body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		<script> 

            $(document).ready(function() {

                var nbFruitsDansLaListe = $("#fruits li").length;
                $("#nb_fruits").html("(" + nbFruitsDansLaListe + ")");
				
            });

			$(document).keypress(function(e) {
			if(e.which == 13) {
				e.preventDefault();
				var listeLI = $("#fruits li");
				var saisie = $("#saisie").val().trim();

				//Verif que saisie non vide
				if (saisie == '' ){
					return alert("Aucun nom saisie");
				}

				var fruitExiste = false;
                var fruitAjoute = false;

				for(var i = 0; i < listeLI.length; i++){
					var li = $(listeLI[i]);
                    if(li.text().toLowerCase() == saisie.toLowerCase()){
                        alert("Le fruit existe déjà dans la liste");
                        fruitExiste = true;
						return false; // Arrêter la boucle
                    }
				};


                if(!fruitExiste){
                    for(var i = 0; i < listeLI.length; i++){
                        var li = $(listeLI[i]);
                        if(li.text().toLowerCase().localeCompare(saisie.toLowerCase()) > 0) {
                            $("<li>" + saisie + "</li>").insertBefore(li).css("color", "#00FF00");
                            fruitAjoute = true;
                            var nbFruitsDansLaListe = $("#fruits li").length;
                            $("#nb_fruits").html("(" + nbFruitsDansLaListe + ")");
                            $("#saisie").val('');
                            return false; // Arrêter la boucle
                        }
				    };
                };


                if (!fruitAjoute) {
                    $("#fruits").append("<li>" + saisie + "</li>");
					$("#fruits li").last().css("color","#00FF00");
					//Mettre à jour le nb de fruits
					var nbFruitsDansLaListe = $("#fruits li").length;
					$("#nb_fruits").html("(" + nbFruitsDansLaListe + ")");
                    $("#saisie").val('');
                }

			}
			});
			
		</script>

		<h1>Fruits <span id="nb_fruits"></span> </h1>
		<ul id="fruits">
			<li>acérola</li>
			<li>amande tropicale</li>
			<li>anone des marais</li>
			<li>avocat</li>
			<li>banane 'Petite Naine'</li>
			<li>barbadine</li>
			<li>cacao</li>
			<li>carambole</li>
			<li>cériman</li>
			<li>corossol</li>
			<li>curuba</li>
			<li>curuba india</li>
			<li>curuba rouge</li>
			<li>datte</li>
			<li>feijoa</li>
			<li>figue de Barbarie</li>
			<li>fruit de la passiflore anémone</li>
			<li>fruit de la passiflore bleue</li>
			<li>fruit de la passion</li>
			<li>fruit de l'arbre à pain</li>
			<li>fruit de sébestier</li>
			<li>girembelle</li>
			<li>goyave</li>
			<li>goyave de Chine</li>
			<li>grenade</li>
			<li>grenadelle</li>
			<li>grenadille 'Black Knight'</li>
			<li>grenadille jaune</li>
			<li>grenadille sauvage</li>
			<li>kiwano</li>
			<li>kumquat Fukushu</li>
			<li>kumquat ovale</li>
			<li>kumquat rond</li>
			<li>litchi</li>
			<li>longane</li>
			<li>mangoustan</li>
			<li>mangue</li>
			<li>marang</li>
			<li>maypop</li>
			<li>noix de cajou</li>
			<li>noix de coco</li>
			<li>orangine</li>
			<li>pamplemousse</li>
			<li>papaye</li>
			<li>papaye des montagnes</li>
			<li>passiflore poc-poc</li>
			<li>pepino</li>
			<li>physalis</li>
			<li>pitaya</li>
			<li>pomme cannelle</li>
			<li>pomme d'eau</li>
			<li>pomme de cythère</li>
			<li>pomme liane</li>
			<li>pomme-surette</li>
			<li>prune d'Inde</li>
			<li>prune du Natal</li>
			<li>raisin bord-de-mer</li>
			<li>ramboutan</li>
			<li>sapote blanche</li>
			<li>tamarin</li>
			<li>tamarin des Indes</li>
			<li>tomate en arbre</li>
		</ul>
		<h1>Formulaire</h1>
		
		<form>
			<label for="saisie">Saisir le nom d'un fruit :</label>
			<input type="text" id="saisie" name="saisie" maxlength="50">
		</form>
		</body>
</html>

